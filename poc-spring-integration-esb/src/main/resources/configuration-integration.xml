<?xml version="1.0" encoding="UTF-8"?>
<beans
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans 
	http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/integration 
		http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/integration/http 
		http://www.springframework.org/schema/integration/http/spring-integration-http.xsd
        http://www.springframework.org/schema/oxm 
        http://www.springframework.org/schema/oxm/spring-oxm.xsd"
	xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:oxm="http://www.springframework.org/schema/oxm"
	xmlns:int-http="http://www.springframework.org/schema/integration/http">

	<int:annotation-config />

	<!-- Online Store > Order Management System -->
	<int-http:inbound-gateway
		id="postOrderIn"
		supported-methods="POST"
		path="/order"
		request-channel="postOrderIn2postOrderOut"
		reply-channel="postOrderOut2postOrderIn">
	</int-http:inbound-gateway>
	<int:channel id="postOrderIn2postOrderOut" />
	<int:channel id="postOrderOut2postOrderIn" />
	<int-http:outbound-gateway
		id="postOrderOut"
		http-method="POST"
		url="http://localhost:8082/order"
		reply-timeout="5000"
		expected-response-type="com.shawnyang.poc.spring.integration.store.i.Order"
		request-channel="postOrderIn2postOrderOut"
		reply-channel="postOrderOut2postOrderIn">
	</int-http:outbound-gateway>
	<!-- Online Store > Order Management System -->

	<!-- Wire tap on all channel to log message through the channels -->
	<int:wire-tap
		pattern="*"
		channel="wireTap2ChannelLogger" />
	<int:channel id="wireTap2ChannelLogger" />
	<int:logging-channel-adapter
		id="channelLogger"
		level="INFO"
		log-full-message="true"
		logger-name="com.shawnyang.poc.spring.integration.esb.channel.ChannelLogger"
		channel="wireTap2ChannelLogger">
	</int:logging-channel-adapter>
	<!-- Wire tap on all channel to log message through the channels -->

</beans>
